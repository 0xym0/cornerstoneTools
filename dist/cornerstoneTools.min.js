/*! cornerstoneTools - v0.0.1 - 2014-04-05 | (c) 2014 Chris Hafey | https://github.com/chafey/cornerstoneTools */
var cornerstoneTools=function(a,b,c){"use strict";function d(a){if(!("mousewheel"===a.originalEvent.type&&0===a.originalEvent.wheelDeltaY||"DOMMouseScroll"===a.originalEvent.type&&1===a.originalEvent.axis)){var c=a.currentTarget,d=b.pageToImage(c,a.pageX,a.pageY);a=window.event||a;var e=a.wheelDelta||-a.detail||-a.originalEvent.detail,f=Math.max(-1,Math.min(1,e)),g=({element:c,viewport:b.getViewport(c),image:b.getEnabledElement(c).image,direction:f,pageX:a.pageX,pageY:a.pageY,imageX:d.x,imageY:d.y},new CustomEvent("CornerstoneToolsMouseWheel",{detail:{event:a,direction:f,viewport:b.getViewport(c),image:b.getEnabledElement(c).image,element:c},bubbles:!1,cancelable:!1}));c.dispatchEvent(g)}}function e(b){a(b).on(g,d)}function f(b){a(b).unbind(g,d)}void 0===c&&(c={});var g="mousewheel DOMMouseScroll";return c.mouseWheelInput={enable:e,disable:f},c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(a){return{x:a.pageX,y:a.pageY}}function e(a,b){return{x:a.x-b.x,y:a.y-b.y}}function f(a){return{x:a.x,y:a.y}}function g(a){var b=f(a.page),c=f(a.image);return{page:b,image:c}}function h(f){function h(f){var g={page:d(f),image:b.pageToImage(j,f.pageX,f.pageY)},h={page:e(g.page,l.page),image:e(g.image,l.image)},i=new CustomEvent("CornerstoneToolsMouseMove",{detail:{event:f,which:n,viewport:b.getViewport(j),image:b.getEnabledElement(j).image,element:j,startPoints:k,lastPoints:l,currentPoints:g,deltaPoints:h},bubbles:!1,cancelable:!1});return j.dispatchEvent(i),l=a.extend({},g),c.pauseEvent(f)}function i(c){var f={page:d(c),image:b.pageToImage(j,c.pageX,c.pageY)},g={page:e(f.page,l.page),image:e(f.image,l.image)},m=new CustomEvent("CornerstoneToolsMouseUp",{detail:{event:c,which:n,viewport:b.getViewport(j),image:b.getEnabledElement(j).image,element:j,startPoints:k,lastPoints:l,currentPoints:f,deltaPoints:g},bubbles:!1,cancelable:!1});j.dispatchEvent(m),a(document).unbind("mousemove",h),a(document).unbind("mouseup",i)}var j=(f.data,f.currentTarget),k={page:d(f),image:b.pageToImage(j,f.pageX,f.pageY)},l=g(k),m=new CustomEvent("CornerstoneToolsMouseDown",{detail:{event:f,which:f.which,viewport:b.getViewport(j),image:b.getEnabledElement(j).image,element:j,startPoints:k,lastPoints:l},bubbles:!1,cancelable:!1});j.dispatchEvent(m);var n=f.which;return a(document).on("mousemove",h),a(document).on("mouseup",i),c.pauseEvent(f)}function i(b){a(b).on("mousedown",h)}function j(b){a(b).unbind("mousedown",h)}return void 0===c&&(c={}),c.mouseInput={enable:i,disable:j},c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(a,b){var c=1<<a-1;return 0!==(b&c)}function e(b){var c={activate:function(c,d){a(c).off("CornerstoneToolsMouseMove",b);var e={mouseButtonMask:d};a(c).on("CornerstoneToolsMouseMove",e,b)},disable:function(c){a(c).off("CornerstoneToolsMouseDown",b)},enable:function(c){a(c).off("CornerstoneToolsMouseDown",b)},deactivate:function(c){a(c).off("CornerstoneToolsMouseDown",b)}};return c}return void 0===c&&(c={}),c.mouseButtonTool=e,c.isMouseButtonEnabled=d,c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(b){var c={activate:function(c){a(c).off("CornerstoneToolsMouseWheel",b);var d={};a(c).on("CornerstoneToolsMouseWheel",d,b)},disable:function(c){a(c).off("CornerstoneToolsMouseWheel",b)},enable:function(c){a(c).off("CornerstoneToolsMouseWheel",b)},deactivate:function(c){a(c).off("CornerstoneToolsMouseWheel",b)}};return c}return void 0===c&&(c={}),c.mouseWheelTool=d,c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(b){var c={activate:function(c){a(c).off("CornerstoneToolsTouchDrag",b);var d={};a(c).on("CornerstoneToolsTouchDrag",d,b)},disable:function(c){a(c).off("CornerstoneToolsTouchDrag",b)},enable:function(c){a(c).off("CornerstoneToolsTouchDrag",b)},deactivate:function(c){a(c).off("CornerstoneToolsTouchDrag",b)}};return c}return void 0===c&&(c={}),c.touchDragTool=d,c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(b){var c={activate:function(c){a(c).off("CornerstoneToolsTouchPinch",b);var d={};a(c).on("CornerstoneToolsTouchPinch",d,b)},disable:function(c){a(c).off("CornerstoneToolsTouchPinch",b)},enable:function(c){a(c).off("CornerstoneToolsTouchPinch",b)},deactivate:function(c){a(c).off("CornerstoneToolsTouchPinch",b)}};return c}return void 0===c&&(c={}),c.touchPinchTool=d,c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(a){var d=a.originalEvent.detail;c.isMouseButtonEnabled(d.which,a.data.mouseButtonMask)&&(d.viewport.centerX+=d.deltaPoints.page.x/d.viewport.scale,d.viewport.centerY+=d.deltaPoints.page.y/d.viewport.scale,b.setViewport(d.element,d.viewport))}function e(a,c){c.viewport.centerX+=c.deltaPageX/c.viewport.scale,c.viewport.centerY+=c.deltaPageY/c.viewport.scale,b.setViewport(a,c.viewport)}function f(a){c.onDrag(a,e)}return void 0===c&&(c={}),c.pan=c.mouseButtonTool(d),c.panTouchDrag=c.touchDragTool(f),c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(a){var d=a.originalEvent.detail;if(c.isMouseButtonEnabled(d.which,a.data.mouseButtonMask)){var e=d.image.maxPixelValue-d.image.minPixelValue,f=e/1024;d.viewport.windowWidth+=d.deltaPoints.page.x*f,d.viewport.windowCenter+=d.deltaPoints.page.y*f,b.setViewport(d.element,d.viewport)}}function e(a){var c=a.originalEvent.detail,d=c.image.maxPixelValue-c.image.minPixelValue,e=d/1024;c.viewport.windowWidth+=c.deltaPoints.page.x*e,c.viewport.windowCenter+=c.deltaPoints.page.y*e,b.setViewport(element,c.viewport)}return void 0===c&&(c={}),c.wwwc=c.mouseButtonTool(d),c.wwwcTouchDrag=c.touchDragTool(e),c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(a,c,d){var e=1.7,f=Math.log(c.scale)/Math.log(e),g=f+d,h=Math.pow(e,g);c.scale=h,b.setViewport(a,c)}function e(a){var e=a.originalEvent.detail;if(c.isMouseButtonEnabled(e.which,a.data.mouseButtonMask)){var f=e.deltaPoints.page.y/100;d(e.element,e.viewport,f);var g=b.pageToImage(e.element,e.startPoints.page.x,e.startPoints.page.y);e.viewport.centerX-=e.startPoints.image.x-g.x,e.viewport.centerY-=e.startPoints.image.y-g.y,b.setViewport(e.element,e.viewport)}return!1}function f(a){var b=a.originalEvent.detail,c=-b.direction/4;d(b.element,b.viewport,c)}function g(){console.log("touchPinchCallback")}return void 0===c&&(c={}),c.zoom=c.mouseButtonTool(e),c.zoomWheel=c.mouseWheelTool(f),c.zoomTouchPinch=c.touchPinchTool(g),c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(a){return{x:a.gesture.touches[0].pageX,y:a.gesture.touches[0].pageY}}function e(a,b){return{x:a.x-b.x,y:a.y-b.y}}function f(a){return{x:a.x,y:a.y}}function g(a){var b=f(a.page),c=f(a.image);return{page:b,image:c}}function h(f){function h(f){console.log("onDrag");var g={page:d(f),image:b.pageToImage(j,f.pageX,f.pageY)},h={page:e(g.page,l.page),image:e(g.image,l.image)},i=new CustomEvent("CornerstoneToolsTouchDrag",{detail:{event:f,viewport:b.getViewport(j),image:b.getEnabledElement(j).image,element:j,startPoints:k,lastPoints:l,currentPoints:g,deltaPoints:h},bubbles:!1,cancelable:!1});return j.dispatchEvent(i),l=a.extend({},g),f.gesture.preventDefault(),c.pauseEvent(f)}function i(){console.log("onDragEnd"),a(j).hammer().off("dragstart",h),a(j).hammer().off("dragend",i)}console.log("onDragStart");var j=f.currentTarget,k={page:d(f),image:b.pageToImage(j,f.pageX,f.pageY)},l=g(k);a(j).hammer().on("drag",h),a(j).hammer().on("dragend",i)}function i(b){console.log("enable"),a(b).hammer().on("dragstart",h)}function j(b){a(b).hammer().off("swipeleft",h)}return void 0===c&&(c={}),c.touchDragInput={enable:i,disable:j},c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){"use strict";function d(a){console.log("onPinch scale="+a.gesture.scale);var c=a.currentTarget,d=new CustomEvent("CornerstoneToolsTouchPinch",{detail:{event:a,viewport:b.getViewport(c),image:b.getEnabledElement(c).image,element:c,scale:a.gesture.scale},bubbles:!1,cancelable:!1});c.dispatchEvent(d)}function e(b){console.log("enable");var c={transform_always_block:!0,transform_min_scale:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_min_distance:0};a(b).hammer(c).on("transform",d)}function f(b){a(b).hammer().off("transform",d)}return void 0===c&&(c={}),c.touchPinchInput={enable:e,disable:f},c}($,cornerstone,cornerstoneTools),cornerstoneTools=function(a,b,c){function d(a){return a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1,!1}return void 0===c&&(c={}),c.pauseEvent=d,c}($,cornerstone,cornerstoneTools);